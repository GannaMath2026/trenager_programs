<!DOCTYPE html>
<html lang="ru">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>–¢—É—Ç–æ—Ä–∏–∞–ª –ø–æ –∫–æ–¥—É permutations</title>
  <style>
    :root {
      --bg: #10131a;
      --panel: #181d27;
      --line: #212938;
      --text: #e7edf8;
      --muted: #9fb0cb;
      --accent: #5aa2ff;
      --ok: #66d28c;
      --warn: #ffcd67;
    }
    * { box-sizing: border-box; }
    body {
      margin: 0;
      font-family: "Segoe UI", Arial, sans-serif;
      background: var(--bg);
      color: var(--text);
    }
    .wrap {
      max-width: 1200px;
      margin: 0 auto;
      padding: 20px;
    }
    .card {
      background: var(--panel);
      border: 1px solid #263148;
      border-radius: 12px;
      padding: 16px;
      margin-bottom: 16px;
    }
    h1, h2 { margin: 0 0 10px 0; }
    p { margin: 6px 0; color: var(--muted); }
    .controls {
      display: flex;
      flex-wrap: wrap;
      gap: 10px;
      align-items: center;
    }
    button, select {
      background: #222b3b;
      color: var(--text);
      border: 1px solid #365083;
      border-radius: 8px;
      padding: 8px 12px;
      cursor: pointer;
    }
    button:hover, select:hover { border-color: var(--accent); }
    .btn-main { background: #1f4f95; }
    .btn-next { background: #1f7b46; }
    .status {
      margin-left: auto;
      color: var(--warn);
      font-weight: 600;
    }
    .codebox {
      border: 1px solid #2f3b56;
      border-radius: 10px;
      overflow: hidden;
    }
    .code-header {
      background: #141a25;
      border-bottom: 1px solid #2f3b56;
      padding: 10px 12px;
      color: var(--muted);
      font-size: 14px;
    }
    .line {
      display: grid;
      grid-template-columns: 46px 1fr 36px;
      align-items: start;
      border-bottom: 1px solid var(--line);
      min-height: 34px;
    }
    .line:last-child { border-bottom: none; }
    .ln {
      color: #6f83a8;
      text-align: right;
      padding: 8px;
      font-size: 13px;
      user-select: none;
    }
    .code {
      white-space: pre-wrap;
      font-family: "Consolas", "Courier New", monospace;
      padding: 8px 0;
    }
    .hint-btn {
      border: none;
      background: transparent;
      color: var(--warn);
      font-size: 18px;
      padding: 4px;
      margin-top: 3px;
      cursor: pointer;
      opacity: 0;
      pointer-events: none;
      transition: 0.2s;
    }
    .line.show-hint .hint-btn {
      opacity: 1;
      pointer-events: auto;
    }
    .line.done { background: rgba(102, 210, 140, 0.08); }
    .line.current { background: rgba(90, 162, 255, 0.12); }
    .token {
      color: #9ec1ff;
      border-bottom: 1px dotted #577ec2;
      cursor: pointer;
    }
    .bubble {
      margin-top: 8px;
      background: #1a2332;
      border: 1px solid #34507f;
      border-radius: 8px;
      padding: 8px;
      color: #c6d8f7;
      display: none;
      font-size: 14px;
      line-height: 1.35;
    }
    .bubble.open { display: block; }
    .legend { font-size: 13px; color: var(--muted); }
  </style>
</head>
<body>
  <div class="wrap">
    <div class="card">
      <h1>–¢—É—Ç–æ—Ä–∏–∞–ª –ø–æ –∫–æ–¥—É permutations</h1>
      <p>–≠—Ç–æ —à–∫–æ–ª—å–Ω—ã–π —Ä–∞–∑–±–æ—Ä. –ö–æ–¥ –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç –∫–∞–∫ –Ω–∞–π—Ç–∏ –ø—Ä–∞–≤–∏–ª—å–Ω–æ–µ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–∏–µ —Ü–∏—Ñ—Ä –∏ –±—É–∫–≤ –≤ –∑–∞–¥–∞—á–µ –ø—Ä–æ –¥–æ—Ä–æ–≥–∏.</p>
      <p>–†–µ–∂–∏–º —Ä–∞–±–æ—Ç–∞–µ—Ç –±–µ–∑ —Å–µ—Ä–≤–µ—Ä–∞. –ü—Ä–æ—Å—Ç–æ –æ—Ç–∫—Ä–æ–π —ç—Ç–æ—Ç —Ñ–∞–π–ª –≤ –±—Ä–∞—É–∑–µ—Ä–µ.</p>
      <div class="controls">
        <button class="btn-main" id="startBtn">–°—Ç–∞—Ä—Ç –º–∞—à–∏–Ω–æ–ø–∏—Å–∏</button>
        <button class="btn-next" id="nextBtn" disabled>–î–∞–ª–µ–µ</button>
        <button id="resetBtn">–°–±—Ä–æ—Å</button>
        <label for="level">–ü–æ–¥—Ä–æ–±–Ω–æ—Å—Ç—å</label>
        <select id="level">
          <option value="short">–ö–æ—Ä–æ—Ç–∫–æ</option>
          <option value="medium" selected>–°—Ä–µ–¥–Ω–µ</option>
          <option value="deep">–ü–æ–¥—Ä–æ–±–Ω–æ</option>
        </select>
        <span class="status" id="statusText">–ù–∞–∂–º–∏ —Å—Ç–∞—Ä—Ç</span>
      </div>
      <p class="legend">–ù–∞–∂–º–∏ –Ω–∞ –∑–Ω–∞—á–æ–∫ —Å–ø—Ä–∞–≤–∞ –æ—Ç —Å—Ç—Ä–æ–∫–∏ —á—Ç–æ–±—ã –æ—Ç–∫—Ä—ã—Ç—å –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π. –ù–∞–∂–º–∏ –Ω–∞ —Å–∏–Ω–∏–µ –∫–æ–º–∞–Ω–¥—ã –≤ –∫–æ–¥–µ —á—Ç–æ–±—ã —É–≤–∏–¥–µ—Ç—å –º–∏–Ω–∏ –ø—Ä–∏–º–µ—Ä.</p>
    </div>

    <div class="card codebox">
      <div class="code-header">–ö–æ–¥ –∏ –ø–æ—à–∞–≥–æ–≤–æ–µ –æ–±—ä—è—Å–Ω–µ–Ω–∏–µ</div>
      <div id="codeArea"></div>
    </div>
  </div>

  <script>
    const codeLines = [
      "from itertools import permutations",
      "for per in permutations('ABCDEFG'):",
      "    p1 = '31 41 42 43 51 54 62 64 72 74 75'",
      "    p2 = 'AF AG BG BC CG CD DG DE EG EF GF'",
      "    for c, b in zip('1234567', per):",
      "        p1 = p1.replace(c, b)",
      "    if all(t in p2 or t[::-1] in p2 for t in p1.split()):",
      "        print(*'1234567')",
      "        print(*per)",
      "        print()"
    ];

    const comments = {
      short: [
        "–ü–æ–¥–∫–ª—é—á–∞–µ–º —Ñ—É–Ω–∫—Ü–∏—é permutations",
        "–ë–µ—Ä–µ–º –æ–¥–∏–Ω –ø–æ—Ä—è–¥–æ–∫ –±—É–∫–≤ A B C D E F G",
        "–≠—Ç–æ –¥–æ—Ä–æ–≥–∏ –∏–∑ —Ç–∞–±–ª–∏—Ü—ã –≤ –≤–∏–¥–µ —Ü–∏—Ñ—Ä",
        "–≠—Ç–æ –¥–æ—Ä–æ–≥–∏ –∏–∑ –≥—Ä–∞—Ñ–∞ –≤ –≤–∏–¥–µ –±—É–∫–≤",
        "–°–≤—è–∑—ã–≤–∞–µ–º –∫–∞–∂–¥—É—é —Ü–∏—Ñ—Ä—É —Å –±—É–∫–≤–æ–π",
        "–ó–∞–º–µ–Ω—è–µ–º —Ü–∏—Ñ—Ä—É –Ω–∞ –±—É–∫–≤—É –≤ –¥–æ—Ä–æ–≥–∞—Ö",
        "–ü—Ä–æ–≤–µ—Ä—è–µ–º —á—Ç–æ –∫–∞–∂–¥–∞—è –¥–æ—Ä–æ–≥–∞ –µ—Å—Ç—å –≤ –≥—Ä–∞—Ñ–µ",
        "–ü–µ—á–∞—Ç–∞–µ–º —Ü–∏—Ñ—Ä—ã",
        "–ü–µ—á–∞—Ç–∞–µ–º –Ω–∞–π–¥–µ–Ω–Ω—ã–µ –±—É–∫–≤—ã",
        "–ü—É—Å—Ç–∞—è —Å—Ç—Ä–æ–∫–∞ –¥–ª—è —Ä–∞–∑–¥–µ–ª–µ–Ω–∏—è"
      ],
      medium: [
        "–ò–º–ø–æ—Ä—Ç. –ù—É–∂–Ω–∞ —Ç–æ–ª—å–∫–æ –æ–¥–Ω–∞ —Ñ—É–Ω–∫—Ü–∏—è permutations",
        "–¶–∏–∫–ª –ø–µ—Ä–µ–±–∏—Ä–∞–µ—Ç –≤—Å–µ –≤–∞—Ä–∏–∞–Ω—Ç—ã —Ä–∞—Å–ø–æ–ª–æ–∂–µ–Ω–∏—è —Å–µ–º–∏ –±—É–∫–≤",
        "p1 —Ö—Ä–∞–Ω–∏—Ç —Å–≤—è–∑–∏ –∏–∑ —Ç–∞–±–ª–∏—Ü—ã. –ü–æ–∫–∞ –≤–µ—Ä—à–∏–Ω—ã –∑–∞–ø–∏—Å–∞–Ω—ã —Ü–∏—Ñ—Ä–∞–º–∏",
        "p2 —Ö—Ä–∞–Ω–∏—Ç —Å–≤—è–∑–∏ –∏–∑ —Ä–∏—Å—É–Ω–∫–∞ –≥—Ä–∞—Ñ–∞. –í–µ—Ä—à–∏–Ω—ã —É–∂–µ –±—É–∫–≤–µ–Ω–Ω—ã–µ",
        "zip –¥–∞–µ—Ç –ø–∞—Ä—ã. –ü–µ—Ä–≤–∞—è —Ü–∏—Ñ—Ä–∞ —Å –ø–µ—Ä–≤–æ–π –±—É–∫–≤–æ–π –∏ —Ç–∞–∫ –¥–∞–ª–µ–µ",
        "replace –∑–∞–º–µ–Ω—è–µ—Ç —Ç–µ–∫—É—â—É—é —Ü–∏—Ñ—Ä—É –Ω–∞ –Ω—É–∂–Ω—É—é –±—É–∫–≤—É –≤–æ –≤—Å–µ–π —Å—Ç—Ä–æ–∫–µ",
        "all –ø—Ä–æ–≤–µ—Ä—è–µ—Ç –∫–∞–∂–¥—ã–π –æ—Ç—Ä–µ–∑–æ–∫. –†–∞–∑—Ä–µ—à–∞–µ–º –ø—Ä—è–º–æ–π –∏ –æ–±—Ä–∞—Ç–Ω—ã–π –ø–æ—Ä—è–¥–æ–∫",
        "–ü–æ–∫–∞–∑—ã–≤–∞–µ–º —ç—Ç–∞–ª–æ–Ω–Ω—ã–π –ø–æ—Ä—è–¥–æ–∫ —Ü–∏—Ñ—Ä",
        "–ü–æ–∫–∞–∑—ã–≤–∞–µ–º –∫–∞–∫–æ–π –±—É–∫–≤–µ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É–µ—Ç –∫–∞–∂–¥–∞—è —Ü–∏—Ñ—Ä–∞",
        "–î–æ–±–∞–≤–ª—è–µ–º –ø—É—Å—Ç—É—é —Å—Ç—Ä–æ–∫—É –º–µ–∂–¥—É –æ—Ç–≤–µ—Ç–∞–º–∏"
      ],
      deep: [
        "–ú—ã –∏–∑–±–µ–≥–∞–µ–º import –∑–≤–µ–∑–¥–æ—á–∫–∞. –¢–∞–∫ –∫–æ–¥ –ø–æ–Ω—è—Ç–Ω–µ–µ –∏ —á–∏—â–µ",
        "permutations —Å—Ç—Ä–æ–∏—Ç 5040 –≤–∞—Ä–∏–∞–Ω—Ç–æ–≤. –≠—Ç–æ –ø–æ–ª–Ω—ã–π –ø–µ—Ä–µ–±–æ—Ä –±–µ–∑ –ø—Ä–æ–ø—É—Å–∫–æ–≤",
        "–°—Ç—Ä–æ–∫–∞ p1 –æ–ø–∏—Å—ã–≤–∞–µ—Ç —Ä–µ–±—Ä–∞ –º–µ–∂–¥—É –≤–µ—Ä—à–∏–Ω–∞–º–∏ 1 2 3 4 5 6 7",
        "–°—Ç—Ä–æ–∫–∞ p2 —ç—Ç–æ –¥–æ–ø—É—Å—Ç–∏–º—ã–µ —Ä–µ–±—Ä–∞ –∏—Å—Ö–æ–¥–Ω–æ–≥–æ –≥—Ä–∞—Ñ–∞ –≤ –±—É–∫–≤–µ–Ω–Ω–æ–º –≤–∏–¥–µ",
        "zip –ø—Ä–æ—Ö–æ–¥–∏—Ç –¥–≤–µ –ø–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ—Å—Ç–∏ —Å–∏–Ω—Ö—Ä–æ–Ω–Ω–æ –∏ –≤—ã–¥–∞–µ—Ç –ø–∞—Ä—ã c –∏ b",
        "–ù–∞ –∫–∞–∂–¥–æ–º —à–∞–≥–µ –≤—Å–µ –Ω–∞–π–¥–µ–Ω–Ω—ã–µ —Ü–∏—Ñ—Ä—ã c –º–µ–Ω—è—é—Ç—Å—è –Ω–∞ –±—É–∫–≤—É b",
        "split –¥–µ–ª–∏—Ç p1 –Ω–∞ –æ—Ç–¥–µ–ª—å–Ω—ã–µ —Ä–µ–±—Ä–∞. all –≤–µ—Ä–Ω–µ—Ç –∏—Å—Ç–∏–Ω–∞ –µ—Å–ª–∏ –≤–µ—Ä–Ω—ã –≤—Å–µ –ø—Ä–æ–≤–µ—Ä–∫–∏",
        "print –∑–≤–µ–∑–¥–æ—á–∫–∞ —Ä–∞—Å–ø–∞–∫–æ–≤—ã–≤–∞–µ—Ç —Å—Ç—Ä–æ–∫—É –≤ –æ—Ç–¥–µ–ª—å–Ω—ã–µ —Å–∏–º–≤–æ–ª—ã",
        "–ó–¥–µ—Å—å –ø–µ—á–∞—Ç–∞–µ—Ç—Å—è –Ω–∞–π–¥–µ–Ω–Ω–∞—è –ø–µ—Ä–µ—Å—Ç–∞–Ω–æ–≤–∫–∞ –±—É–∫–≤ –¥–ª—è —Ç–µ–∫—É—â–µ–≥–æ —Ä–µ—à–µ–Ω–∏—è",
        "–ü—É—Å—Ç–∞—è —Å—Ç—Ä–æ–∫–∞ –ø–æ–º–æ–≥–∞–µ—Ç –≤–∏–∑—É–∞–ª—å–Ω–æ —Ä–∞–∑–¥–µ–ª—è—Ç—å –Ω–µ—Å–∫–æ–ª—å–∫–æ —Ä–µ—à–µ–Ω–∏–π"
      ]
    };

    const tokenHints = {
      "permutations": "–§—É–Ω–∫—Ü–∏—è —Å—Ç—Ä–æ–∏—Ç –≤—Å–µ –≤–∞—Ä–∏–∞–Ω—Ç—ã –ø–æ—Ä—è–¥–∫–∞. –ü—Ä–∏–º–µ—Ä permutations ABC –¥–∞–µ—Ç ABC ACB BAC BCA CAB CBA",
      "zip": "zip —Å–æ–µ–¥–∏–Ω—è–µ—Ç —ç–ª–µ–º–µ–Ω—Ç—ã –ø–æ–ø–∞—Ä–Ω–æ. –ü—Ä–∏–º–µ—Ä 12 –∏ AB –¥–∞–µ—Ç –ø–∞—Ä—ã 1 A –∏ 2 B",
      "replace": "replace –º–µ–Ω—è–µ—Ç —Å–∏–º–≤–æ–ª. –ü—Ä–∏–º–µ—Ä 31 41 —Å –∑–∞–º–µ–Ω–æ–π 1 –Ω–∞ A –¥–∞–µ—Ç 3A 4A",
      "all": "all –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç –∏—Å—Ç–∏–Ω–∞ –µ—Å–ª–∏ –∫–∞–∂–¥–æ–µ —É—Å–ª–æ–≤–∏–µ –∏—Å—Ç–∏–Ω–Ω–æ",
      "split": "split —Ä–∞–∑–±–∏–≤–∞–µ—Ç —Å—Ç—Ä–æ–∫—É –ø–æ –ø—Ä–æ–±–µ–ª–∞–º –Ω–∞ —Å–ø–∏—Å–æ–∫ —á–∞—Å—Ç–µ–π",
      "[::-1]": "–°—Ä–µ–∑ —Å —à–∞–≥–æ–º –º–∏–Ω—É—Å –æ–¥–∏–Ω —Ä–∞–∑–≤–æ—Ä–∞—á–∏–≤–∞–µ—Ç —Å—Ç—Ä–æ–∫—É. –ü—Ä–∏–º–µ—Ä AB —Å—Ç–∞–Ω–æ–≤–∏—Ç—Å—è BA",
      "print": "print –≤—ã–≤–æ–¥–∏—Ç —Ç–µ–∫—Å—Ç –Ω–∞ —ç–∫—Ä–∞–Ω"
    };

    const codeArea = document.getElementById('codeArea');
    const startBtn = document.getElementById('startBtn');
    const nextBtn = document.getElementById('nextBtn');
    const resetBtn = document.getElementById('resetBtn');
    const levelSel = document.getElementById('level');
    const statusText = document.getElementById('statusText');

    let currentLine = 0;
    let typing = false;

    function wrapTokens(line) {
      const keys = Object.keys(tokenHints).sort((a, b) => b.length - a.length);
      let out = line;
      keys.forEach(key => {
        const esc = key.replace(/[.*+?^${}()|[\]\\]/g, "\\$&");
        const re = new RegExp(esc, "g");
        out = out.replace(re, `<span class=\"token\" data-token=\"${key}\">${key}</span>`);
      });
      return out;
    }

    function buildRows() {
      codeArea.innerHTML = '';
      codeLines.forEach((_, i) => {
        const row = document.createElement('div');
        row.className = 'line';
        row.id = `row-${i}`;
        row.innerHTML = `
          <div class="ln">${i + 1}</div>
          <div>
            <div class="code" id="code-${i}"></div>
            <div class="bubble" id="bubble-${i}"></div>
          </div>
          <button class="hint-btn" id="hint-${i}" title="–ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π">üí°</button>
        `;
        codeArea.appendChild(row);
      });

      codeArea.querySelectorAll('.hint-btn').forEach(btn => {
        btn.addEventListener('click', () => {
          const i = Number(btn.id.split('-')[1]);
          openBubble(i);
        });
      });

      codeArea.addEventListener('click', (e) => {
        const token = e.target.closest('.token');
        if (!token) return;
        const key = token.dataset.token;
        const row = token.closest('.line');
        const idx = Number(row.id.split('-')[1]);
        const bubble = document.getElementById(`bubble-${idx}`);
        bubble.textContent = tokenHints[key] || '';
        bubble.classList.add('open');
      });
    }

    function openBubble(i) {
      const bubble = document.getElementById(`bubble-${i}`);
      bubble.textContent = comments[levelSel.value][i];
      bubble.classList.toggle('open');
    }

    function typeLine(i, done) {
      const row = document.getElementById(`row-${i}`);
      const codeCell = document.getElementById(`code-${i}`);
      const text = codeLines[i];
      let pos = 0;
      row.classList.add('current');
      typing = true;
      function step() {
        if (pos > text.length) {
          row.classList.remove('current');
          row.classList.add('done', 'show-hint');
          typing = false;
          done();
          return;
        }
        codeCell.textContent = text.slice(0, pos);
        pos += 1;
        setTimeout(step, 14);
      }
      step();
    }

    function finalizeLineMarkup(i) {
      const codeCell = document.getElementById(`code-${i}`);
      codeCell.innerHTML = wrapTokens(codeLines[i]);
    }

    function startTutorial() {
      if (typing) return;
      if (currentLine >= codeLines.length) return;
      startBtn.disabled = true;
      nextBtn.disabled = true;
      statusText.textContent = `–ü–µ—á–∞—Ç–∞–µ–º —Å—Ç—Ä–æ–∫—É ${currentLine + 1}`;
      typeLine(currentLine, () => {
        finalizeLineMarkup(currentLine);
        statusText.textContent = `–°—Ç—Ä–æ–∫–∞ ${currentLine + 1} –≥–æ—Ç–æ–≤–∞. –ù–∞–∂–º–∏ –î–∞–ª–µ–µ`;
        nextBtn.disabled = false;
      });
    }

    function nextStep() {
      if (typing) return;
      if (currentLine >= codeLines.length) return;
      currentLine += 1;
      if (currentLine >= codeLines.length) {
        nextBtn.disabled = true;
        statusText.textContent = '–ì–æ—Ç–æ–≤–æ. –í—Å–µ —Å—Ç—Ä–æ–∫–∏ –ø–æ–∫–∞–∑–∞–Ω—ã';
        return;
      }
      startTutorial();
    }

    function resetAll() {
      currentLine = 0;
      typing = false;
      buildRows();
      startBtn.disabled = false;
      nextBtn.disabled = true;
      statusText.textContent = '–ù–∞–∂–º–∏ —Å—Ç–∞—Ä—Ç';
    }

    startBtn.addEventListener('click', startTutorial);
    nextBtn.addEventListener('click', nextStep);
    resetBtn.addEventListener('click', resetAll);
    levelSel.addEventListener('change', () => {
      codeArea.querySelectorAll('.bubble.open').forEach((b) => {
        const idx = Number(b.id.split('-')[1]);
        b.textContent = comments[levelSel.value][idx] || b.textContent;
      });
    });

    resetAll();
  </script>
</body>
</html>
