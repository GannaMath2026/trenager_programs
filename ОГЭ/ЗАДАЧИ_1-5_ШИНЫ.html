<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>–®–∏–Ω—ã –û–ì–≠ ‚Äî –†–µ—à–µ–Ω–∏–µ –∑–∞–¥–∞—á 1-5</title>
    <style>
        * {
            box-sizing: border-box;
            font-family: 'Segoe UI', Roboto, system-ui, sans-serif;
        }
        body {
            background: #f3f5f9;
            margin: 0;
            padding: 20px;
            display: flex;
            justify-content: center;
        }
        .app {
            max-width: 1000px;
            width: 100%;
            background: white;
            border-radius: 32px;
            box-shadow: 0 20px 40px rgba(0,0,0,0.15);
            padding: 24px;
        }
        h1 {
            margin: 0 0 10px 0;
            color: #1e3c72;
            font-size: 28px;
            font-weight: 700;
            display: flex;
            align-items: center;
            gap: 8px;
        }
        .subhead {
            color: #4a5f7a;
            margin-bottom: 20px;
            padding-left: 16px;
            border-left: 4px solid #3a7bd5;
        }
        .nav-panel {
            display: flex;
            flex-wrap: wrap;
            gap: 8px;
            background: #f0f4fc;
            padding: 12px;
            border-radius: 50px;
            margin-bottom: 25px;
        }
        .nav-btn {
            padding: 10px 18px;
            border-radius: 40px;
            font-weight: 600;
            background: white;
            color: #1e3a6b;
            cursor: pointer;
            border: 1px solid #c6d6f0;
            font-size: 14px;
        }
        .nav-btn:hover {
            background: #dce7ff;
        }
        .nav-btn.active {
            background: #1e3c72;
            color: white;
            border-color: #1e3c72;
        }
        .theory-block {
            background: #e8f0fe;
            border-radius: 24px;
            padding: 20px;
            margin-bottom: 20px;
        }
        .theory-title {
            font-size: 18px;
            font-weight: 700;
            color: #1e3c72;
            margin-bottom: 15px;
        }
        .formula-grid {
            display: flex;
            flex-wrap: wrap;
            gap: 10px;
        }
        .formula-card {
            background: white;
            border-radius: 16px;
            padding: 12px 16px;
            border: 1px solid #c7daff;
            font-weight: 600;
            color: #003b6a;
        }
        .task-card {
            background: white;
            border-radius: 24px;
            padding: 20px;
            margin-bottom: 20px;
            border: 1px solid #dde5f5;
        }
        .task-header {
            display: flex;
            align-items: center;
            gap: 12px;
            margin-bottom: 15px;
        }
        .task-icon {
            background: #1e3c72;
            color: white;
            width: 36px;
            height: 36px;
            border-radius: 18px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: 700;
        }
        .condition-box {
            background: #f2f6fe;
            border-radius: 16px;
            padding: 16px;
            border-left: 4px solid #3a7bd5;
            margin: 15px 0;
            font-size: 14px;
        }
        .image-area {
            background: #f8faff;
            border: 2px dashed #7f9fd9;
            border-radius: 16px;
            padding: 20px;
            text-align: center;
            margin: 15px 0;
            cursor: pointer;
            min-height: 100px;
            display: flex;
            align-items: center;
            justify-content: center;
            flex-direction: column;
        }
        .image-area:hover {
            background: #e3edff;
        }
        .image-area img {
            max-width: 100%;
            max-height: 200px;
            border-radius: 12px;
            margin-top: 10px;
        }
        .table-container {
            overflow-x: auto;
            margin: 15px 0;
            background: white;
            border-radius: 16px;
            border: 1px solid #bdc9e5;
        }
        table {
            border-collapse: collapse;
            width: 100%;
            min-width: 400px;
        }
        th {
            background: #1e3c72;
            color: white;
            padding: 10px;
            font-weight: 600;
            font-size: 14px;
        }
        td {
            border: 1px solid #bdc9e5;
            padding: 10px;
            text-align: center;
            font-size: 14px;
        }
        .btn {
            background: #1e3c72;
            color: white;
            border: none;
            padding: 10px 20px;
            border-radius: 30px;
            font-weight: 600;
            font-size: 14px;
            cursor: pointer;
            margin-right: 10px;
            border: 1px solid #1e3c72;
        }
        .btn-outline {
            background: white;
            color: #1e3c72;
        }
        .hint-box {
            background: #fff8e1;
            border: 1px solid #ffc107;
            border-radius: 16px;
            padding: 12px 16px;
            margin: 10px 0;
            font-size: 14px;
            display: none;
        }
        .hint-box.show {
            display: block;
        }
        .answer-input-area {
            display: flex;
            gap: 10px;
            align-items: center;
            margin: 15px 0;
            flex-wrap: wrap;
        }
        .answer-input {
            padding: 12px 16px;
            border-radius: 30px;
            border: 1px solid #bdc9e5;
            flex: 1 1 200px;
            font-size: 16px;
        }
        .check-result {
            font-weight: 600;
            padding: 8px 16px;
            border-radius: 30px;
        }
        .correct {
            background: #e3f2e9;
            color: #2e7d5e;
        }
        .incorrect {
            background: #ffebee;
            color: #c62828;
        }
        .calculator-block {
            background: #f8faff;
            border-radius: 16px;
            padding: 16px;
            margin: 15px 0;
            border: 1px solid #aac4f0;
        }
        .calc-input {
            display: flex;
            gap: 10px;
            flex-wrap: wrap;
            margin: 10px 0;
        }
        .calc-input input {
            padding: 10px 14px;
            border-radius: 30px;
            border: 1px solid #bdc9e5;
            flex: 1 1 200px;
        }
        .calc-result {
            background: white;
            border-radius: 16px;
            padding: 10px 15px;
            font-weight: 600;
            color: #1e3c72;
            border: 1px solid #1e3c72;
            margin-top: 10px;
        }
        .modal {
            display: none;
            position: fixed;
            top: 0; left: 0; right: 0; bottom: 0;
            background: rgba(0,0,0,0.8);
            align-items: center;
            justify-content: center;
            z-index: 1000;
        }
        .modal.show {
            display: flex;
        }
        .modal-content {
            background: white;
            padding: 20px;
            border-radius: 30px;
            max-width: 90%;
        }
        .modal-content img {
            max-width: 100%;
            max-height: 80vh;
            border-radius: 16px;
        }
    </style>
</head>
<body>
<div class="app">
    <h1>üöó –®–∏–Ω—ã –û–ì–≠ 1‚Äì5</h1>
    <div class="subhead">–í—Å–µ –ø—Ä–æ—Ç–æ—Ç–∏–ø—ã –∏–∑ –±–∞–Ω–∫–∞ –§–ò–ü–ò ¬∑ –ü—Ä–æ–≤–µ—Ä–∫–∞ –æ—Ç–≤–µ—Ç–æ–≤ ¬∑ –ö–∞–ª—å–∫—É–ª—è—Ç–æ—Ä –ø–æ–¥ –∑–∞–¥–∞—á–µ–π</div>

    <!-- –ù–∞–≤–∏–≥–∞—Ü–∏—è -->
    <div class="nav-panel" id="navPanel">
        <div class="nav-btn active" data-section="theory">üìò –¢–µ–æ—Ä–∏—è</div>
        <div class="nav-btn" data-section="type1">üîπ –¢–∏–ø 1</div>
        <div class="nav-btn" data-section="type2">üîπ –¢–∏–ø 2</div>
        <div class="nav-btn" data-section="type3">üîπ –¢–∏–ø 3</div>
        <div class="nav-btn" data-section="type4">üîπ –¢–∏–ø 4</div>
        <div class="nav-btn" data-section="type5">üîπ –¢–∏–ø 5</div>
        <div class="nav-btn" data-section="type6">üîπ –¢–∏–ø 6</div>
        <div class="nav-btn" data-section="type7">üîπ –¢–∏–ø 7</div>
        <div class="nav-btn" data-section="cheat">üìö –®–ø–∞—Ä–≥–∞–ª–∫–∞</div>
    </div>

    <!-- –¢–µ–æ—Ä–∏—è -->
    <div id="theory" class="theory-block">
        <div class="theory-title">üìê –û—Å–Ω–æ–≤–Ω—ã–µ —Ñ–æ—Ä–º—É–ª—ã</div>
        <div class="formula-grid">
            <div class="formula-card">H = B √ó p / 100</div>
            <div class="formula-card">d(–º–º) = –¥—é–π–º—ã √ó 25,4</div>
            <div class="formula-card">D = d + 2H</div>
            <div class="formula-card">R = d/2 + H</div>
            <div class="formula-card">C = œÄ √ó D</div>
            <div class="formula-card">Œî% = (D‚ÇÇ ‚àí D‚ÇÅ)/D‚ÇÅ √ó 100%</div>
        </div>
    </div>

    <!-- –ö–æ–Ω—Ç–µ–π–Ω–µ—Ä –¥–ª—è –∑–∞–¥–∞—á -->
    <div id="taskContainer"></div>

    <!-- –®–ø–∞—Ä–≥–∞–ª–∫–∞ -->
    <div id="cheat" style="display: none;">
        <div class="task-card">
            <h3>üìå –ê–ª–≥–æ—Ä–∏—Ç–º—ã –ø–æ —Ç–∏–ø–∞–º</h3>
            <table>
                <tr><th>–¢–∏–ø</th><th>–î–µ–π—Å—Ç–≤–∏–µ</th></tr>
                <tr><td>–¢–∏–ø 1 ‚Äî –¢–∞–±–ª–∏—Ü–∞</td><td>–ù–∞–π—Ç–∏ –≤ —Ç–∞–±–ª–∏—Ü–µ –Ω—É–∂–Ω—ã–π –¥–∏—Å–∫, –≤—ã–±—Ä–∞—Ç—å max/min —à–∏—Ä–∏–Ω—É</td></tr>
                <tr><td>–¢–∏–ø 2 ‚Äî –í—ã—Å–æ—Ç–∞ H</td><td>H = B √ó (2-–µ —á–∏—Å–ª–æ)/100</td></tr>
                <tr><td>–¢–∏–ø 3 ‚Äî –†–∞–¥–∏—É—Å—ã</td><td>R = d/2 + H; —Å—Ä–∞–≤–Ω–∏—Ç—å</td></tr>
                <tr><td>–¢–∏–ø 4 ‚Äî –î–∏–∞–º–µ—Ç—Ä</td><td>D = d√ó25,4 + 2H</td></tr>
                <tr><td>–¢–∏–ø 5 ‚Äî –ò–∑–º–µ–Ω–µ–Ω–∏–µ D</td><td>ŒîD = D‚ÇÇ ‚àí D‚ÇÅ</td></tr>
                <tr><td>–¢–∏–ø 6 ‚Äî % –ø—Ä–æ–±–µ–≥–∞</td><td>ŒîD / D‚ÇÅ √ó 100%</td></tr>
                <tr><td>–¢–∏–ø 7 ‚Äî –ê–≤—Ç–æ—Å–µ—Ä–≤–∏—Å</td><td>(—Å—É–º–º–∞ –æ–ø–µ—Ä–∞—Ü–∏–π)√ó4 + –¥–æ—Ä–æ–≥–∞, –≤—ã–±—Ä–∞—Ç—å –º–∏–Ω–∏–º—É–º</td></tr>
            </table>
        </div>
    </div>

    <!-- –ú–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ -->
    <div class="modal" id="modal" onclick="closeModal()">
        <div class="modal-content">
            <img id="modalImg" src="" alt="–£–≤–µ–ª–∏—á–µ–Ω–Ω–æ–µ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ">
        </div>
    </div>
</div>

<script>
    // –î–∞–Ω–Ω—ã–µ –∑–∞–¥–∞—á
    const tasks = {
        type1: {
            title: '–¢–∏–ø 1 ‚Äî –¢–∞–±–ª–∏—Ü–∞ –¥–æ–ø—É—Å—Ç–∏–º—ã—Ö —Ä–∞–∑–º–µ—Ä–æ–≤',
            condition: `–ó–∞–≤–æ–¥ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç –ª–µ–≥–∫–æ–≤—ã–µ –∞–≤—Ç–æ–º–æ–±–∏–ª–∏ –æ–ø—Ä–µ–¥–µ–ª—ë–Ω–Ω–æ–π –º–æ–¥–µ–ª–∏ –∏ —É—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç –Ω–∞ –Ω–∏—Ö —à–∏–Ω—ã 215/65 R16. –ó–∞–≤–æ–¥ –¥–æ–ø—É—Å–∫–∞–µ—Ç —É—Å—Ç–∞–Ω–æ–≤–∫—É —à–∏–Ω —Å –¥—Ä—É–≥–∏–º–∏ –º–∞—Ä–∫–∏—Ä–æ–≤–∫–∞–º–∏. –í —Ç–∞–±–ª–∏—Ü–µ –ø–æ–∫–∞–∑–∞–Ω—ã —Ä–∞–∑—Ä–µ—à—ë–Ω–Ω—ã–µ —Ä–∞–∑–º–µ—Ä—ã —à–∏–Ω.`,
            table: {
                headers: ['–®–∏—Ä–∏–Ω–∞ —à–∏–Ω—ã (–º–º)', '15', '16', '17', '18'],
                rows: [
                    ['195', '195/65', '195/60', '195/55', '‚Äì'],
                    ['205', '205/60', '205/55; 205/60', '205/50', '205/45'],
                    ['215', '215/60', '215/55', '215/50', '215/40; 215/45'],
                    ['225', '‚Äì', '225/50', '225/50; 225/45', '225/40']
                ]
            },
            question: '–®–∏–Ω—ã –∫–∞–∫–æ–π –Ω–∞–∏–±–æ–ª—å—à–µ–π —à–∏—Ä–∏–Ω—ã –º–æ–∂–Ω–æ —É—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞—Ç—å –Ω–∞ –∞–≤—Ç–æ–º–æ–±–∏–ª—å, –µ—Å–ª–∏ –¥–∏–∞–º–µ—Ç—Ä –¥–∏—Å–∫–∞ —Ä–∞–≤–µ–Ω 17 –¥—é–π–º–∞–º? –û—Ç–≤–µ—Ç –¥–∞–π—Ç–µ –≤ –º–∏–ª–ª–∏–º–µ—Ç—Ä–∞—Ö.',
            answer: '225',
            hint: '–°–º–æ—Ç—Ä–∏ —Å—Ç–æ–ª–±–µ—Ü –¥–ª—è 17 –¥—é–π–º–æ–≤: –µ—Å—Ç—å —à–∏–Ω—ã —Å —à–∏—Ä–∏–Ω–æ–π 195, 205, 215, 225. –ù–∞–∏–±–æ–ª—å—à–∞—è —à–∏—Ä–∏–Ω–∞ = 225 –º–º.'
        },
        type2: {
            title: '–¢–∏–ø 2 ‚Äî –í—ã—Å–æ—Ç–∞ –±–æ–∫–æ–≤–∏–Ω—ã',
            condition: `–°–∫–æ–ª—å–∫–æ –º–∏–ª–ª–∏–º–µ—Ç—Ä–æ–≤ —Å–æ—Å—Ç–∞–≤–ª—è–µ—Ç –≤—ã—Å–æ—Ç–∞ –±–æ–∫–æ–≤–∏–Ω—ã —à–∏–Ω—ã —Å –º–∞—Ä–∫–∏—Ä–æ–≤–∫–æ–π 275/70 R16?`,
            answer: '192.5',
            hint: 'H = B √ó p / 100 = 275 √ó 70 / 100 = 192,5 –º–º'
        },
        type3: {
            title: '–¢–∏–ø 3 ‚Äî –°—Ä–∞–≤–Ω–µ–Ω–∏–µ —Ä–∞–¥–∏—É—Å–æ–≤',
            condition: `–ó–∞–≤–æ–¥ —Å—Ç–∞–≤–∏—Ç —à–∏–Ω—ã 215/60 R16. –ù–∞ —Å–∫–æ–ª—å–∫–æ –º–∏–ª–ª–∏–º–µ—Ç—Ä–æ–≤ —Ä–∞–¥–∏—É—Å –∫–æ–ª–µ—Å–∞ —Å –º–∞—Ä–∫–∏—Ä–æ–≤–∫–æ–π 205/55 R17 –º–µ–Ω—å—à–µ, —á–µ–º —Ä–∞–¥–∏—É—Å –∫–æ–ª–µ—Å–∞ —Å –º–∞—Ä–∫–∏—Ä–æ–≤–∫–æ–π 235/50 R17?`,
            answer: '4.75',
            hint: '–ù–∞–π–¥–∏ —Ä–∞–¥–∏—É—Å –∫–∞–∂–¥–æ–≥–æ –∫–æ–ª–µ—Å–∞ (R = d/2 + H) –∏ –≤—ã—á—Ç–∏.'
        },
        type4: {
            title: '–¢–∏–ø 4 ‚Äî –î–∏–∞–º–µ—Ç—Ä –∑–∞–≤–æ–¥—Å–∫–æ–≥–æ –∫–æ–ª–µ—Å–∞',
            condition: `–ù–∞–π–¥–∏—Ç–µ –¥–∏–∞–º–µ—Ç—Ä –∫–æ–ª–µ—Å–∞ –∞–≤—Ç–æ–º–æ–±–∏–ª—è, –≤—ã—Ö–æ–¥—è—â–µ–≥–æ —Å –∑–∞–≤–æ–¥–∞ (—à–∏–Ω—ã 215/65 R16). –û—Ç–≤–µ—Ç –¥–∞–π—Ç–µ –≤ –º–∏–ª–ª–∏–º–µ—Ç—Ä–∞—Ö.`,
            answer: '685.9',
            hint: 'H = 215 √ó 0,65 = 139,75; d = 16 √ó 25,4 = 406,4; D = d + 2H'
        },
        type5: {
            title: '–¢–∏–ø 5 ‚Äî –ò–∑–º–µ–Ω–µ–Ω–∏–µ –¥–∏–∞–º–µ—Ç—Ä–∞ –ø—Ä–∏ –∑–∞–º–µ–Ω–µ',
            condition: `–ù–∞ —Å–∫–æ–ª—å–∫–æ –º–∏–ª–ª–∏–º–µ—Ç—Ä–æ–≤ —É–≤–µ–ª–∏—á–∏—Ç—Å—è –¥–∏–∞–º–µ—Ç—Ä –∫–æ–ª–µ—Å–∞, –µ—Å–ª–∏ –∑–∞–º–µ–Ω–∏—Ç—å —à–∏–Ω—ã 215/65 R16 –Ω–∞ —à–∏–Ω—ã 235/50 R18?`,
            answer: '6.3',
            hint: '–ù–∞–π–¥–∏ D1 (–∑–∞–≤–æ–¥—Å–∫–æ–µ) –∏ D2 –¥–ª—è –Ω–æ–≤—ã—Ö —à–∏–Ω, –≤—ã—á—Ç–∏'
        },
        type6: {
            title: '–¢–∏–ø 6 ‚Äî –ü—Ä–æ—Ü–µ–Ω—Ç –∏–∑–º–µ–Ω–µ–Ω–∏—è –ø—Ä–æ–±–µ–≥–∞',
            condition: `–ù–∞ —Å–∫–æ–ª—å–∫–æ –ø—Ä–æ—Ü–µ–Ω—Ç–æ–≤ —É–≤–µ–ª–∏—á–∏—Ç—Å—è –ø—Ä–æ–±–µ–≥ –∞–≤—Ç–æ–º–æ–±–∏–ª—è –ø—Ä–∏ –æ–¥–Ω–æ–º –æ–±–æ—Ä–æ—Ç–µ –∫–æ–ª–µ—Å–∞, –µ—Å–ª–∏ –∑–∞–º–µ–Ω–∏—Ç—å —à–∏–Ω—ã 215/65 R16 –Ω–∞ —à–∏–Ω—ã 225/65 R16? –†–µ–∑—É–ª—å—Ç–∞—Ç –æ–∫—Ä—É–≥–ª–∏—Ç–µ –¥–æ –¥–µ—Å—è—Ç—ã—Ö.`,
            answer: '1.9',
            hint: 'Œî% = (D‚ÇÇ ‚àí D‚ÇÅ) / D‚ÇÅ √ó 100%'
        },
        type7: {
            title: '–¢–∏–ø 7 ‚Äî –ê–≤—Ç–æ—Å–µ—Ä–≤–∏—Å (—Å—Ä–∞–≤–Ω–µ–Ω–∏–µ —Å—Ç–æ–∏–º–æ—Å—Ç–∏)',
            condition: `–ö–∏—Ä–∏–ª–ª –º–µ–Ω—è–µ—Ç –∑–∏–º–Ω—é—é —Ä–µ–∑–∏–Ω—É –Ω–∞ –ª–µ—Ç–Ω—é—é –Ω–∞ 4 –∫–æ–ª—ë—Å–∞—Ö. –û–Ω –≤—ã–±–∏—Ä–∞–µ—Ç –º–µ–∂–¥—É –∞–≤—Ç–æ—Å–µ—Ä–≤–∏—Å–∞–º–∏ –ê –∏ –ë. 
            –°–µ—Ä–≤–∏—Å –ê: —Å–Ω—è—Ç–∏–µ 160, –∑–∞–º–µ–Ω–∞ 200, –±–∞–ª–∞–Ω—Å–∏—Ä–æ–≤–∫–∞ 160, —É—Å—Ç–∞–Ω–æ–≤–∫–∞ 160, –¥–æ—Ä–æ–≥–∞ 150.
            –°–µ—Ä–≤–∏—Å –ë: —Å–Ω—è—Ç–∏–µ 140, –∑–∞–º–µ–Ω–∞ 220, –±–∞–ª–∞–Ω—Å–∏—Ä–æ–≤–∫–∞ 160, —É—Å—Ç–∞–Ω–æ–≤–∫–∞ 140, –¥–æ—Ä–æ–≥–∞ 420.
            –°–∫–æ–ª—å–∫–æ —Ä—É–±–ª–µ–π –∑–∞–ø–ª–∞—Ç–∏—Ç –ö–∏—Ä–∏–ª–ª, –µ—Å–ª–∏ –≤—ã–±–µ—Ä–µ—Ç —Å–∞–º—ã–π –¥–µ—à—ë–≤—ã–π –≤–∞—Ä–∏–∞–Ω—Ç?`,
            answer: '2870',
            hint: '–ü–æ—Å—á–∏—Ç–∞–π —Å—Ç–æ–∏–º–æ—Å—Ç—å –∫–∞–∂–¥–æ–≥–æ —Å–µ—Ä–≤–∏—Å–∞: (—Å—É–º–º–∞ –æ–ø–µ—Ä–∞—Ü–∏–π –Ω–∞ 1 –∫–æ–ª–µ—Å–æ) √ó 4 + –¥–æ—Ä–æ–≥–∞, –≤—ã–±–µ—Ä–∏ –º–∏–Ω–∏–º—É–º'
        }
    };

    // –ù–∞–≤–∏–≥–∞—Ü–∏—è
    document.querySelectorAll('.nav-btn').forEach(btn => {
        btn.addEventListener('click', (e) => {
            document.querySelectorAll('.nav-btn').forEach(b => b.classList.remove('active'));
            btn.classList.add('active');
            const section = btn.dataset.section;

            document.getElementById('theory').style.display = 'none';
            document.getElementById('cheat').style.display = 'none';
            document.getElementById('taskContainer').innerHTML = '';

            if (section === 'theory') {
                document.getElementById('theory').style.display = 'block';
            } else if (section === 'cheat') {
                document.getElementById('cheat').style.display = 'block';
            } else {
                renderTask(section);
            }
        });
    });

    // –†–µ–Ω–¥–µ—Ä –∑–∞–¥–∞—á–∏
    function renderTask(type) {
        const task = tasks[type];
        const taskId = type + '-' + Date.now();
        
        let html = `<div class="task-card" id="task-${taskId}">`;
        html += `<div class="task-header"><span class="task-icon">${type.slice(-1)}</span><h3>${task.title}</h3></div>`;
        
        // –û–±–ª–∞—Å—Ç—å –¥–ª—è –≤—Å—Ç–∞–≤–∫–∏ –∫–∞—Ä—Ç–∏–Ω–∫–∏
        html += `<div class="image-area" onclick="pasteImage('${taskId}')" id="imageArea-${taskId}">`;
        html += `<span>üì∏ –ö–ª–∏–∫–Ω–∏ —á—Ç–æ–±—ã –≤—Å—Ç–∞–≤–∏—Ç—å –∫–∞—Ä—Ç–∏–Ω–∫—É (Ctrl+V)</span>`;
        html += `<img id="image-${taskId}" style="display:none;">`;
        html += `</div>`;
        
        html += `<div class="condition-box">${task.condition.replace(/\n/g, '<br>')}</div>`;

        // –¢–∞–±–ª–∏—Ü–∞ –µ—Å–ª–∏ –µ—Å—Ç—å
        if (task.table) {
            html += `<div class="table-container"><table><tr>`;
            task.table.headers.forEach(h => html += `<th>${h}</th>`);
            html += '</tr>';
            task.table.rows.forEach(row => {
                html += '<tr>';
                row.forEach(cell => html += `<td>${cell}</td>`);
                html += '</tr>';
            });
            html += '</table></div>';
        }

        // –ö–∞–ª—å–∫—É–ª—è—Ç–æ—Ä –ø–æ–¥ –∑–∞–¥–∞—á–µ–π
        html += `<div class="calculator-block">`;
        html += `<h4>üßÆ –ö–∞–ª—å–∫—É–ª—è—Ç–æ—Ä</h4>`;
        html += `<div class="calc-input">`;
        html += `<input type="text" id="calcExpr-${taskId}" placeholder="–í–≤–µ–¥–∏—Ç–µ –≤—ã—Ä–∞–∂–µ–Ω–∏–µ (–Ω–∞–ø—Ä–∏–º–µ—Ä 2+2*5)" value="2+2*5">`;
        html += `<button class="btn" onclick="calculateTaskCalc('${taskId}')">=</button>`;
        html += `</div>`;
        html += `<div id="calcResult-${taskId}" class="calc-result">12</div>`;
        html += `</div>`;

        // –ü–æ–ª–µ –≤–≤–æ–¥–∞ –æ—Ç–≤–µ—Ç–∞
        html += `<div class="answer-input-area">`;
        html += `<input type="text" id="answer-${taskId}" class="answer-input" placeholder="–í–≤–µ–¥–∏—Ç–µ –≤–∞—à –æ—Ç–≤–µ—Ç">`;
        html += `<button class="btn" onclick="checkAnswer('${taskId}', '${task.answer}')">–ü—Ä–æ–≤–µ—Ä–∏—Ç—å</button>`;
        html += `<button class="btn btn-outline" onclick="showHint('${taskId}')">üí° –ü–æ–¥—Å–∫–∞–∑–∫–∞</button>`;
        html += `</div>`;

        html += `<div id="checkResult-${taskId}" class="check-result"></div>`;
        html += `<div id="hint-${taskId}" class="hint-box">${task.hint}</div>`;

        html += `</div>`;

        document.getElementById('taskContainer').innerHTML = html;
        
        // –î–æ–±–∞–≤–ª—è–µ–º –æ–±—Ä–∞–±–æ—Ç—á–∏–∫ –≤—Å—Ç–∞–≤–∫–∏ –¥–ª—è –æ–±–ª–∞—Å—Ç–∏ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è
        setTimeout(() => {
            const imageArea = document.getElementById(`imageArea-${taskId}`);
            imageArea.addEventListener('paste', (e) => handlePaste(e, taskId));
        }, 100);
    }

    // –ü—Ä–æ–≤–µ—Ä–∫–∞ –æ—Ç–≤–µ—Ç–∞
    window.checkAnswer = function(taskId, correctAnswer) {
        const userAnswer = document.getElementById(`answer-${taskId}`).value.trim();
        const resultDiv = document.getElementById(`checkResult-${taskId}`);
        
        if (userAnswer === correctAnswer) {
            resultDiv.innerHTML = '‚úÖ –í–µ—Ä–Ω–æ! –ú–æ–ª–æ–¥–µ—Ü!';
            resultDiv.className = 'check-result correct';
        } else {
            resultDiv.innerHTML = '‚ùå –ù–µ–≤–µ—Ä–Ω–æ. –ü–æ–ø—Ä–æ–±—É–π –µ—â—ë –∏–ª–∏ –≤–æ—Å–ø–æ–ª—å–∑—É–π—Å—è –ø–æ–¥—Å–∫–∞–∑–∫–æ–π.';
            resultDiv.className = 'check-result incorrect';
        }
    };

    // –ü–æ–∫–∞–∑–∞—Ç—å –ø–æ–¥—Å–∫–∞–∑–∫—É
    window.showHint = function(taskId) {
        document.getElementById(`hint-${taskId}`).classList.add('show');
    };

    // –ö–∞–ª—å–∫—É–ª—è—Ç–æ—Ä –¥–ª—è –∑–∞–¥–∞—á–∏
    window.calculateTaskCalc = function(taskId) {
        const expr = document.getElementById(`calcExpr-${taskId}`).value;
        try {
            const result = eval(expr);
            document.getElementById(`calcResult-${taskId}`).innerText = result;
        } catch {
            document.getElementById(`calcResult-${taskId}`).innerText = '–û—à–∏–±–∫–∞';
        }
    };

    // –í—Å—Ç–∞–≤–∫–∞ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è –∏–∑ –±—É—Ñ–µ—Ä–∞
    window.handlePaste = function(e, taskId) {
        const items = (e.clipboardData || e.originalEvent.clipboardData).items;
        for (let item of items) {
            if (item.type.indexOf('image') === 0) {
                const blob = item.getAsFile();
                const reader = new FileReader();
                reader.onload = function(event) {
                    const img = document.getElementById(`image-${taskId}`);
                    img.src = event.target.result;
                    img.style.display = 'block';
                    img.style.maxWidth = '100%';
                    img.style.maxHeight = '200px';
                    img.style.marginTop = '10px';
                    img.style.borderRadius = '12px';
                    
                    const area = document.getElementById(`imageArea-${taskId}`);
                    area.innerHTML = '';
                    area.appendChild(img);
                    area.innerHTML += '<span style="font-size:12px; margin-top:8px;">‚úÖ –ö–∞—Ä—Ç–∏–Ω–∫–∞ –≤—Å—Ç–∞–≤–ª–µ–Ω–∞ (–∫–ª–∏–∫ –¥–ª—è —É–≤–µ–ª–∏—á–µ–Ω–∏—è)</span>';
                    area.onclick = () => openModal(img.src);
                };
                reader.readAsDataURL(blob);
                e.preventDefault();
            }
        }
    };

    // –ú–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ
    window.openModal = function(src) {
        document.getElementById('modalImg').src = src;
        document.getElementById('modal').classList.add('show');
    };

    window.closeModal = function() {
        document.getElementById('modal').classList.remove('show');
    };

    // –ü—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ –ø–æ–∫–∞–∑–∞—Ç—å —Ç–µ–æ—Ä–∏—é
    window.onload = function() {
        document.getElementById('theory').style.display = 'block';
    };
</script>
</body>
</html>