<html lang="ru"><head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Вероятность оказаться в 1 группе</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: 'Segoe UI', 'Arial', sans-serif;
            background: #0a0a0a;
            margin: 0;
            padding: 20px;
            color: #00ff9d;
            min-height: 100vh;
            display: flex;
            justify-content: center;
            align-items: center;
        }
        
        .container {
            width: calc(100% - 4%);
            max-width: 1400px;
            background: rgba(10, 10, 20, 0.95);
            border-radius: 0;
            border: 2px solid #00ff9d;
            padding: 30px;
            box-shadow: 
                0 0 30px rgba(0, 255, 157, 0.3),
                inset 0 0 30px rgba(0, 255, 157, 0.1);
            position: relative;
            overflow: hidden;
        }
        
        .container::before {
            content: '';
            position: absolute;
            top: -2px;
            left: -2px;
            right: -2px;
            bottom: -2px;
            background: linear-gradient(45deg, 
                rgba(0, 255, 157, 0.1),
                rgba(0, 150, 255, 0.1),
                rgba(255, 0, 200, 0.1));
            z-index: -1;
            border-radius: 2px;
        }
        
        .header {
            text-align: center;
            margin-bottom: 40px;
            padding-bottom: 20px;
            border-bottom: 1px solid rgba(0, 255, 157, 0.3);
        }
        
        .header h1 {
            font-size: 32px;
            margin: 0;
            font-weight: 700;
            letter-spacing: 2px;
            text-transform: uppercase;
            color: #00ff9d;
            text-shadow: 0 0 15px rgba(0, 255, 157, 0.7);
        }
        
        .input-row {
            display: flex;
            gap: 40px;
            margin-bottom: 40px;
            padding: 25px;
            background: rgba(0, 20, 30, 0.8);
            border: 1px solid rgba(0, 200, 255, 0.4);
            width: 100%;
            max-width: 600px;
            margin-left: auto;
            margin-right: auto;
        }
        
        .input-group {
            flex: 1;
            display: flex;
            flex-direction: column;
            gap: 12px;
            min-width: 200px;
        }
        
        .input-group label {
            font-weight: 300;
            color: #00c3ff;
            font-size: 16px;
            letter-spacing: 1px;
            display: flex;
            align-items: center;
            gap: 10px;
        }
        
        .input-group label::before {
            content: "▸";
            font-size: 18px;
            color: #00ff9d;
            text-shadow: 0 0 8px rgba(0, 255, 157, 0.7);
        }
        
        .input-group input {
            padding: 15px 20px;
            border: 1px solid #00c3ff;
            border-radius: 0;
            font-size: 20px;
            font-weight: 300;
            background: rgba(0, 30, 40, 0.9);
            color: #00ff9d;
            transition: all 0.3s ease;
            outline: none;
            letter-spacing: 1px;
            width: 100%;
        }
        
        .input-group input:focus {
            border-color: #ff00ff;
            box-shadow: 
                0 0 20px rgba(255, 0, 255, 0.4),
                inset 0 0 20px rgba(255, 0, 255, 0.1);
        }
        
        .warning {
            text-align: center;
            color: #ff0055;
            font-size: 18px;
            margin: 20px 0;
            padding: 15px;
            background: rgba(255, 0, 85, 0.1);
            border: 1px solid #ff0055;
            text-shadow: 0 0 10px rgba(255, 0, 85, 0.5);
            display: none;
            animation: warning-pulse 2s infinite;
        }
        
        .circles-container {
            width: 100%;
            margin: 40px 0;
            padding: 30px;
            background: rgba(0, 15, 25, 0.8);
            border: 1px solid rgba(255, 0, 200, 0.3);
            display: flex;
            flex-wrap: nowrap;
            justify-content: center;
            align-items: center;
            gap: 60px;
            min-height: 200px;
        }
        
        .circle-group {
            flex-shrink: 0;
            text-align: center;
            position: relative;
            transition: transform 0.3s ease;
        }
        
        .circle-group:hover {
            transform: translateY(-5px);
        }
        
        .circle {
            width: 140px;
            height: 140px;
            border: 2px solid #00c3ff;
            border-radius: 50%;
            position: relative;
            margin: 0 auto 15px;
            background: rgba(0, 40, 60, 0.3);
            box-shadow: 
                0 0 20px rgba(0, 195, 255, 0.3),
                inset 0 0 30px rgba(0, 195, 255, 0.1);
        }
        
        .dot {
            width: 24px;
            height: 24px;
            border-radius: 50%;
            position: absolute;
            transform: translate(-50%, -50%);
            border: 2px solid rgba(255, 255, 255, 0.9);
            box-shadow: 0 0 10px currentColor;
            z-index: 1;
        }
        
        .friend1 {
            background: #ff0055;
            color: #ff0055;
            z-index: 3;
            animation: pulse-red 2s ease-in-out infinite;
            box-shadow: 
                0 0 15px #ff0055,
                0 0 30px #ff0055,
                inset 0 0 10px rgba(255, 255, 255, 0.8);
        }
        
        .friend2 {
            background: #00ff9d;
            color: #00ff9d;
            z-index: 2;
            animation: pulse-green 2s ease-in-out infinite 0.5s;
            box-shadow: 
                0 0 15px #00ff9d,
                0 0 30px #00ff9d,
                inset 0 0 10px rgba(255, 255, 255, 0.8);
        }
        
        .other {
            background: #0095ff;
            color: #0095ff;
            box-shadow: 
                0 0 8px #0095ff,
                inset 0 0 5px rgba(255, 255, 255, 0.6);
        }
        
        .ellipsis {
            font-size: 40px;
            color: #ff00ff;
            font-weight: bold;
            text-shadow: 0 0 20px #ff00ff;
            animation: blink 1.5s infinite;
            flex-shrink: 0;
            margin: 0 20px;
        }
        
        .group-label {
            font-size: 16px;
            color: #00c3ff;
            margin-top: 10px;
            font-weight: 300;
            letter-spacing: 1px;
            text-transform: uppercase;
        }
        
        .result-container {
            width: 100%;
            max-width: 800px;
            margin: 40px auto 0;
            padding: 30px;
            background: rgba(0, 25, 40, 0.9);
            border: 1px solid rgba(0, 255, 157, 0.4);
            position: relative;
        }
        
        .formula {
            font-family: 'Courier New', monospace;
            font-size: 24px;
            color: #00ff9d;
            text-align: center;
            margin-bottom: 20px;
            padding: 20px;
            background: rgba(0, 40, 60, 0.5);
            border: 1px solid #0095ff;
            letter-spacing: 1px;
            text-shadow: 0 0 10px rgba(0, 255, 157, 0.3);
        }
        
        .answer-label {
            font-size: 20px;
            font-weight: 700;
            color: #00ff9d;
            text-align: center;
            margin-bottom: 15px;
            text-transform: uppercase;
            letter-spacing: 1px;
        }
        
        .answer {
            font-size: 42px;
            font-weight: 700;
            text-align: center;
            color: #ff00ff;
            text-shadow: 
                0 0 25px #ff00ff,
                0 0 50px #ff00ff;
            padding: 30px;
            background: rgba(20, 0, 40, 0.5);
            border: 2px solid #ff00ff;
            letter-spacing: 3px;
            animation: glow 2s ease-in-out infinite alternate;
        }
        
        @keyframes pulse-red {
            0%, 100% { 
                box-shadow: 
                    0 0 15px #ff0055,
                    0 0 30px #ff0055,
                    inset 0 0 10px rgba(255, 255, 255, 0.8);
                transform: translate(-50%, -50%) scale(1);
            }
            50% { 
                box-shadow: 
                    0 0 25px #ff0055,
                    0 0 50px #ff0055,
                    inset 0 0 15px rgba(255, 255, 255, 1);
                transform: translate(-50%, -50%) scale(1.1);
            }
        }
        
        @keyframes pulse-green {
            0%, 100% { 
                box-shadow: 
                    0 0 15px #00ff9d,
                    0 0 30px #00ff9d,
                    inset 0 0 10px rgba(255, 255, 255, 0.8);
                transform: translate(-50%, -50%) scale(1);
            }
            50% { 
                box-shadow: 
                    0 0 25px #00ff9d,
                    0 0 50px #00ff9d,
                    inset 0 0 15px rgba(255, 255, 255, 1);
                transform: translate(-50%, -50%) scale(1.1);
            }
        }
        
        @keyframes blink {
            0%, 100% { opacity: 1; }
            50% { opacity: 0.3; }
        }
        
        @keyframes glow {
            0% { text-shadow: 0 0 25px #ff00ff, 0 0 50px #ff00ff; }
            100% { text-shadow: 0 0 35px #ff00ff, 0 0 70px #ff00ff; }
        }
        
        @keyframes warning-pulse {
            0%, 100% { 
                box-shadow: 0 0 10px rgba(255, 0, 85, 0.3);
                opacity: 1;
            }
            50% { 
                box-shadow: 0 0 20px rgba(255, 0, 85, 0.5);
                opacity: 0.8;
            }
        }
    </style>
<style type="text/css" id="operaUserStyle"></style></head>
<body>
    <div class="container">
        <div class="header">
            <h1>Вероятность оказаться в 1 группе</h1>
        </div>

        <div class="input-row">
            <div class="input-group">
                <label for="total">ВСЕГО ЧЕЛОВЕК</label>
                <input type="number" id="total" min="2" value="26">
            </div>
            <div class="input-group">
                <label for="numGroups">КОЛИЧЕСТВО ГРУПП</label>
                <input type="number" id="numGroups" min="1" value="13">
            </div>
        </div>

        <div class="warning" id="warning" style="display: none;">⚠️ Число людей (24) не делится нацело на количество групп (5)!<br>
                                       <small style="color: #00c3ff;">Остаток: 4 человек</small></div>

        <div class="circles-container" id="circles"><div class="circle-group"><div class="circle" style="width: 280px; height: 280px;"><div class="dot other" style="width: 21px; height: 21px; left: 92.8571%; top: 50%;"></div><div class="dot other" style="width: 21px; height: 21px; left: 87.1154%; top: 71.4286%;"></div><div class="dot other" style="width: 21px; height: 21px; left: 71.4286%; top: 87.1154%;"></div><div class="dot other" style="width: 21px; height: 21px; left: 50%; top: 92.8571%;"></div><div class="dot other" style="width: 21px; height: 21px; left: 28.5714%; top: 87.1154%;"></div><div class="dot other" style="width: 21px; height: 21px; left: 12.8846%; top: 71.4286%;"></div><div class="dot other" style="width: 21px; height: 21px; left: 7.14286%; top: 50%;"></div><div class="dot other" style="width: 21px; height: 21px; left: 12.8846%; top: 28.5714%;"></div><div class="dot other" style="width: 21px; height: 21px; left: 28.5714%; top: 12.8846%;"></div><div class="dot other" style="width: 21px; height: 21px; left: 50%; top: 7.14286%;"></div><div class="dot friend1" style="width: 21px; height: 21px; left: 71.4286%; top: 12.8846%;"></div><div class="dot friend2" style="width: 21px; height: 21px; left: 87.1154%; top: 28.5714%;"></div></div><div class="group-label">ГРУППА 1 (12 чел.)</div></div><div class="circle-group"><div class="circle" style="width: 280px; height: 280px;"><div class="dot other" style="width: 21px; height: 21px; left: 92.8571%; top: 50%;"></div><div class="dot other" style="width: 21px; height: 21px; left: 87.1154%; top: 71.4286%;"></div><div class="dot other" style="width: 21px; height: 21px; left: 71.4286%; top: 87.1154%;"></div><div class="dot other" style="width: 21px; height: 21px; left: 50%; top: 92.8571%;"></div><div class="dot other" style="width: 21px; height: 21px; left: 28.5714%; top: 87.1154%;"></div><div class="dot other" style="width: 21px; height: 21px; left: 12.8846%; top: 71.4286%;"></div><div class="dot other" style="width: 21px; height: 21px; left: 7.14286%; top: 50%;"></div><div class="dot other" style="width: 21px; height: 21px; left: 12.8846%; top: 28.5714%;"></div><div class="dot other" style="width: 21px; height: 21px; left: 28.5714%; top: 12.8846%;"></div><div class="dot other" style="width: 21px; height: 21px; left: 50%; top: 7.14286%;"></div><div class="dot other" style="width: 21px; height: 21px; left: 71.4286%; top: 12.8846%;"></div><div class="dot other" style="width: 21px; height: 21px; left: 87.1154%; top: 28.5714%;"></div></div><div class="group-label">ГРУППА 2 (12 чел.)</div></div></div>

        <div class="result-container">
            <div class="formula" id="formula">Групп: 2, в группе: 24/2 = 12 чел.<br>
                                   P = (12 - 1) / (24 - 1) = 11 / 23</div>
            <div class="answer-label">Ответ:</div>
            <div class="answer" id="answer">0.4783 (47.83%)</div>
        </div>
    </div>

    <script>
        function updateVisualization() {
            const N = parseInt(document.getElementById('total').value);
            const m = parseInt(document.getElementById('numGroups').value);
            
            if (N < 2 || m < 1 || m > N) return;
            
            const warningDiv = document.getElementById('warning');
            if (N % m !== 0) {
                warningDiv.style.display = 'block';
                warningDiv.innerHTML = `⚠️ Число людей (${N}) не делится нацело на количество групп (${m})!<br>
                                       <small style="color: #00c3ff;">Остаток: ${N % m} человек</small>`;
                document.getElementById('circles').innerHTML = '';
                document.getElementById('formula').innerHTML = 'Не делится нацело';
                document.getElementById('answer').innerHTML = 'Невозможно расчитать';
                return;
            } else {
                warningDiv.style.display = 'none';
            }
            
            const k = N / m;
            const probability = (k - 1) / (N - 1);
            createCircles(N, m, k);
            updateResult(N, m, k, probability);
        }
        
        function createCircles(N, m, k) {
            const circlesDiv = document.getElementById('circles');
            circlesDiv.innerHTML = '';
            
            // ВСЕГДА показываем реальное количество кружков в группе
            const dotsToShow = k; // Убрали Math.min(k, 4) - теперь всегда k
            
            // Максимум 4 группы: 1-2-3...последняя
            if (m <= 4) {
                for (let i = 0; i < m; i++) {
                    circlesDiv.appendChild(createCircle(i, dotsToShow, i === 0));
                }
            } else {
                for (let i = 0; i < 3; i++) {
                    circlesDiv.appendChild(createCircle(i, dotsToShow, i === 0));
                }
                
                const ellipsis = document.createElement('div');
                ellipsis.className = 'ellipsis';
                ellipsis.textContent = '...';
                circlesDiv.appendChild(ellipsis);
                
                circlesDiv.appendChild(createCircle(m - 1, dotsToShow, false));
            }
        }
        
        function createCircle(groupIndex, k, hasFriends) {
            const container = document.createElement('div');
            container.className = 'circle-group';
            
            const circle = document.createElement('div');
            circle.className = 'circle';
            
            // Размер круга адаптируется под количество точек
            const circleSize = Math.max(100, 80+ k * 15);
            circle.style.width = `${circleSize}px`;
            circle.style.height = `${circleSize}px`;
            
            // Размер точки адаптируется
            const dotSize = Math.max(20, 24 - Math.floor(k / 8) * 3);
            
            if (hasFriends) {
                const radius = circleSize / 2 - 20;
                
                for (let i = 0; i < k; i++) {
                    const angle = (2 * Math.PI * i) / k;
                    const x = 50 + (radius / (circleSize / 2) * 50) * Math.cos(angle);
                    const y = 50 + (radius / (circleSize / 2) * 50) * Math.sin(angle);
                    
                    const dot = document.createElement('div');
                    dot.className = 'dot';
                    dot.style.width = `${dotSize}px`;
                    dot.style.height = `${dotSize}px`;
                    
                    // Последние 2 кружка - красный и зеленый
                    if (k >= 2 && i === k - 2) {
                        dot.classList.add('friend1');
                    } else if (k >= 1 && i === k - 1) {
                        dot.classList.add('friend2');
                    } else {
                        dot.classList.add('other');
                    }
                    
                    dot.style.left = x + '%';
                    dot.style.top = y + '%';
                    circle.appendChild(dot);
                }
            } else {
                const radius = circleSize / 2 - 20;
                
                for (let i = 0; i < k; i++) {
                    const angle = (2 * Math.PI * i) / k;
                    const x = 50 + (radius / (circleSize / 2) * 40) * Math.cos(angle);
                    const y = 50 + (radius / (circleSize / 2) * 50) * Math.sin(angle);
                    
                    const dot = document.createElement('div');
                    dot.className = 'dot other';
                    dot.style.width = `${dotSize}px`;
                    dot.style.height = `${dotSize}px`;
                    dot.style.left = x + '%';
                    dot.style.top = y + '%';
                    circle.appendChild(dot);
                }
            }
            
            container.appendChild(circle);
            
            const label = document.createElement('div');
            label.className = 'group-label';
            label.textContent = `ГРУППА ${groupIndex + 1} (${k} чел.)`;
            container.appendChild(label);
            
            return container;
        }
        
        function updateResult(N, m, k, probability) {
            const formulaDiv = document.getElementById('formula');
            const answerDiv = document.getElementById('answer');
            
            formulaDiv.innerHTML = `Групп: ${m}, в группе: ${N}/${m} = ${k} чел.<br>
                                   P = (${k} - 1) / (${N} - 1) = ${k-1} / ${N-1}`;
            
            const percent = (probability * 100).toFixed(2);
            
            let answerText;
            if (k-1 === 1 && N-1 === 25) {
                answerText = `1/25 ≈ ${probability.toFixed(4)} (${percent}%)`;
            } else if (k-1 === 4 && N-1 === 19) {
                answerText = `4/19 ≈ ${probability.toFixed(4)} (${percent}%)`;
            } else if (probability === 0) {
                answerText = `0 (0%)`;
            } else if (probability === 1) {
                answerText = `1 (100%)`;
            } else {
                answerText = `${probability.toFixed(4)} (${percent}%)`;
            }
            
            answerDiv.innerHTML = answerText;
        }
        
        document.getElementById('total').addEventListener('input', updateVisualization);
        document.getElementById('numGroups').addEventListener('input', updateVisualization);
        
        document.addEventListener('DOMContentLoaded', function() {
            updateVisualization();
        });
    </script>

</body></html>